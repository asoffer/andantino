<html>
  <head>
    <title>Andantino</title>
    <script src = "Point.js"></script>
    <script src = "jquery.js"></script>
    <script src = "List.js"></script>
    <script src = "Hex.js"></script>
    <script src = "Game.js"></script>

    <script type="application/javascript">
//hex size
var gSize = 20;

//canvas center

//game (singleton)
var g;

$(document).ready(function(){
    g = new Game();
    g.init();
    g.draw();

    //initialize reading mouse position

    $("#canvas").mousemove(function(event){
	var p = new Point(event.offsetX, event.offsetY)
	g.mouse = new Point(Math.round((p.x*2-document.width-2*g.trans.x)/(3*gSize)),0);

	g.mouse.add(new Point(0,Math.round((p.y-document.height/2-g.trans.y)/(1.732*gSize)+g.mouse.x/2)));

	g.redrawMouseHex();

	if(g.isMouseDown){
	    g.ctx.translate(event.offsetX-g.click.x, event.offsetY-g.click.y);
	    g.trans.add(p).sub(g.click);
	    g.click = p;
	    g.draw();
	}
    });

    $("#canvas").mousedown(function(event){
	g.click = new Point(event.offsetX, event.offsetY);
	g.isMouseDown = true;
    });

    $("#canvas").mouseup(function(event){
	g.isMouseDown = false;
    });

    $("#canvas").click(function(event){ g.clicked(); });

    $(document).keypress(function(event){
	if(event.which == 49)
	    gSize -= 2;
	if(event.which == 50)
	    gSize += 2;
	if (gSize <= 6)
	    gSize = 6;
	g.draw();
    });


});


    </script>
    <style>
      body{
      padding: 0;
	  margin: 0;
      }
    </style>


  </head>
  <body>
    <canvas id="canvas"></canvas>
  </body>
</html>
